<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Productos</title>
    <link rel="stylesheet" href="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .product {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
            text-align: center;
            transition: transform 0.3s ease-in-out;
            max-width: 45%;  /* Ajusta el ancho máximo de los productos */
            box-sizing: border-box;
            display: inline-block;
            vertical-align: top;
        }

        .product:hover {
            transform: scale(1.1);
        }

        .product img {
            max-width: 100%;
            max-height: 150px;
            margin-bottom: 10px;
        }

        #cart {
            border: 1px solid #333;
            padding: 10px;
            margin-top: 20px;
        }

        #paymentOptions {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>Catálogo de Productos</h1>

<!-- Sección 1 -->
<div class="section">
    <!-- Producto 1 -->
    <div class="product" id="product1">
        <img src="imagen1.jpg" alt="Producto 1">
        <h2>Producto 1</h2>
        <p>Precio: S/ 10.00</p>
        <button onclick="addToCart('Producto 1', 10.00)">Añadir al Carrito</button>
    </div>

    <!-- Producto 2 -->
    <div class="product" id="product2">
        <img src="imagen2.jpg" alt="Producto 2">
        <h2>Producto 2</h2>
        <p>Precio: S/ 15.00</p>
        <button onclick="addToCart('Producto 2', 15.00)">Añadir al Carrito</button>
    </div>

    <!-- Producto 3 -->
    <div class="product" id="product3">
        <img src="imagen3.jpg" alt="Producto 3">
        <h2>Producto 3</h2>
        <p>Precio: S/ 20.00</p>
        <button onclick="addToCart('Producto 3', 20.00)">Añadir al Carrito</button>
    </div>
</div>

<h2>Carrito de Compras</h2>
<div id="cart"></div>

<div id="paymentOptions" style="display: none;">
    <h2>Opciones de Pago</h2>
    <button onclick="payWithCard()">Pagar con Tarjeta Visa</button>
    <button onclick="generateVoucher()">Generar Comprobante (Voucher)</button>
</div>

<!-- Panel de Administración -->
<div id="adminPanel">
    <h2>Panel de Administración</h2>
    <form id="updateForm">
        <label for="productName">Nombre del Producto:</label>
        <input type="text" id="productName" required>

        <label for="newPrice">Nuevo Precio (S/):</label>
        <input type="number" id="newPrice" step="0.01" required>

        <button type="button" onclick="updatePrice()">Actualizar Precio</button>
    </form>
</div>

<!-- Biblioteca html2pdf.js -->
<script src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.js"></script>

<script>
    var cart = [];

    function addToCart(productName, price) {
        cart.push({ name: productName, price: price });
        updateCart();
    }

    function updateCart() {
        var cartContainer = document.getElementById('cart');
        cartContainer.innerHTML = '';

        var total = 0;

        for (var i = 0; i < cart.length; i++) {
            var item = cart[i];
            total += item.price;

            var cartItem = document.createElement('div');
            cartItem.innerHTML = '<p>' + item.name + ' - S/ ' + item.price.toFixed(2) + '</p>';
            cartContainer.appendChild(cartItem);
        }

        cartContainer.innerHTML += '<hr>';
        cartContainer.innerHTML += '<p>Total: S/ ' + total.toFixed(2) + '</p>';

        // Mostrar opciones de pago al menos un producto en el carrito
        if (cart.length > 0) {
            document.getElementById('paymentOptions').style.display = 'block';
        }
    }

    function updatePrice() {
        var productName = document.getElementById('productName').value;
        var newPrice = parseFloat(document.getElementById('newPrice').value);

        // Actualizar el precio del producto (puedes mejorar esta lógica según tus necesidades)
        var productElement = document.getElementById('product' + productName);
        if (productElement) {
            var priceElement = productElement.querySelector('p');
            if (priceElement) {
                priceElement.innerHTML = 'Precio: S/ ' + newPrice.toFixed(2);
            }
        }

        // Ocultar el panel de administración
        document.getElementById('adminPanel').style.display = 'none';
    }

    function payWithCard() {
        // Simulación de pago con tarjeta Visa
        alert('Pagando con Tarjeta Visa. ¡Gracias por tu compra!');
        generateReceipt();
        resetCart();
    }

    function generateVoucher() {
        // Simulación de generación de comprobante (voucher)
        alert('Generando Comprobante (Voucher). ¡Gracias por tu compra!');
        generateReceipt();
        resetCart();
    }

    function generateReceipt() {
        // Generar PDF con html2pdf.js
        var cartContent = document.getElementById('cart').innerHTML;

        var options = {
            margin: 10,
            filename: 'comprobante.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().from(cartContent).set(options).outputPdf();
    }

    function resetCart() {
        cart = [];
        updateCart();
        document.getElementById('paymentOptions').style.display = 'none';
    }

    // Mostrar/ocultar el panel de administración al presionar cierta combinación de teclas
    document.addEventListener('keydown', function (event) {
        if (event.ctrlKey && event.altKey && event.code === 'KeyP') {
            toggleAdminPanel();
        }
    });

    function toggleAdminPanel() {
        var adminPanel = document.getElementById('adminPanel');
        adminPanel.style.display = (adminPanel.style.display === 'none') ? 'block' : 'none';
    }
</script>

</body>
</html>
